---
interface Props {
  id: string;
  title: string;
  maxWidth?: string;
}
const { id, title, maxWidth = 'max-w-2xl' } = Astro.props;
---

<dialog
  id={id}
  class:list={[
    'rounded-xl shadow-2xl backdrop:bg-black/40 p-0 w-full border border-gray-200',
    'animate-modal-in',
    maxWidth,
  ]}
>
  <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
    <h2 class="text-lg font-semibold text-gray-900">{title}</h2>
    <button
      type="button"
      class="text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100"
      data-modal-close={id}
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>
  <div class="px-6 py-4 max-h-[70vh] overflow-y-auto">
    <slot />
  </div>
  <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl">
    <slot name="footer" />
  </div>
</dialog>

<script is:inline define:vars={{ id }}>
(function() {
  const dialog = document.getElementById(id);
  if (!dialog) return;

  // Close button
  const closeBtn = dialog.querySelector(`[data-modal-close="${id}"]`);
  if (closeBtn) {
    closeBtn.addEventListener('click', () => dialog.close());
  }

  // Backdrop click to close
  dialog.addEventListener('click', (e) => {
    if (e.target === dialog) dialog.close();
  });
})();
</script>
