---
import { getEventsForMonths, type OIAC_Event } from "../lib/content/events";

let currentMonth = new Date().getMonth() + 1;
const eventsForTheMonth: Array<OIAC_Event> = await getEventsForMonths([
  currentMonth,
]);

const date = new Date();
const monthName = date.toLocaleString("default", { month: "long" });
const year = date.getFullYear();
---

{eventsForTheMonth.length > 0 && (
<div class="px-4 p-2 md:px-8 md:py-2 mx-auto">
  <div class="container mt-5">
    <div class="my-10">
      <!-- Events -->
      <div
        class="bg-gray-600 text-gray-50 rounded-t-3xl font-bold text-2xl py-10 px-3 text-center"
      >
        <h4 class="text-left pl-5">Events at OIAC - {monthName}&nbsp;{year}</h4>
      </div>

      <div class="bg-gray-500 text-gray-50 rounded-b-3xl">
        {
          eventsForTheMonth.map((event) => (
            <div class="grid grid-cols-4 gap-5 text-xl border-b border-gray-800">
              <div class="text-center p-1 pt-3">
                {event.schedules.length > 0 &&
                  event.schedules.map((schedule) => (
                    <div class="mb-3">
                      <h4 class="text-xl font-bold text-cyan-50">
                        {schedule.date}
                      </h4>
                      <h4 class="text-sm italic">{schedule.time}</h4>
                    </div>
                  ))}
              </div>
              <div class="text-left p-1 pt-3 pl-3 col-span-3 border-l border-gray-800">
                <h3 class="text-2xl font-bold mb-5 text-cyan-50">
                  {event.title}
                </h3>

                {event.description && (
                  <div class="text-sm">
                    <Fragment set:html={event.description.html} />
                  </div>
                )}
              </div>
            </div>
          ))
        }
        <p class="h-5"></p>
      </div>
    </div>
  </div>
</div>
)}

